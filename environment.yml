name: vip5
channels:
  - pytorch
  - nvidia
  - conda-forge
  - defaults
dependencies:
  # Python version
  - python=3.9

  # PyTorch and related packages
  # NOTE: PyTorch 1.12 is required for compatibility with this codebase
  - pytorch=1.12.0
  - torchvision=0.13.0
  - torchaudio=0.12.0
  - cudatoolkit=11.3

  # Core scientific packages
  - numpy>=1.21.0,<1.24.0
  - scipy>=1.7.0
  - scikit-learn>=1.0.0

  # Utilities
  - tqdm>=4.64.0
  - pyyaml>=6.0
  - pillow>=9.0.0
  - matplotlib>=3.5.0
  - pandas>=1.4.0

  # Development tools
  - jupyter>=1.0.0
  - ipykernel>=6.15.0

  # Pip packages
  - pip
  - pip:
    # CRITICAL: transformers version must be <4.18.0 for compatibility
    # - 4.18+ renamed T5DenseReluDense to T5DenseActDense
    # - 4.30+ changed GenerationMixin import path
    # Recommended: use 4.16.2 (tested and stable)
    - transformers==4.16.2
    - sentencepiece>=0.1.96
    - tokenizers>=0.10.0,<0.12.0
    # OpenAI CLIP (must install from git)
    - git+https://github.com/openai/CLIP.git
    # Additional packages
    - ftfy>=6.1.0
    - regex>=2022.0.0
